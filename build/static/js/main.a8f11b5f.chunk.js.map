{"version":3,"sources":["index.js","pages lazy /^/.*$/ groupOptions: {} namespace object","assets/image/logo.svg","layouts/SideMenu.js","utils/utils.js","layouts/GlobalHeader.js","layouts/BasicLayout.js","router/menu.js","router/routerUtils.js","router/router.js"],"names":["app","dva","history","createHistory","router","require","default","start","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","Div","styled","div","Sider","Layout","SubMenu","Menu","Item","SideMenu","props","menuData","isCollapsed","location","initialState","useState","tabList","path","selectedMenuKeys","setSelectedMenuKeys","openKeys","setOpenKeys","useEffect","pathname","url","urlList","split","filter","item","index","join","transUrlToList","getNavMenuItems","title","isHideInMenu","generateSubMenuOrMenuItem","children","some","child","childrenItems","length","icon","PieChartOutlined","to","handleMenuOpen","lastOpenKey","IsMoreThanOneOpenKeysInMainMenu","intersection","collapsed","width","className","src","logo","alt","selectedKeys","mode","theme","onClick","handleMenuChange","onOpenChange","GlobalHeader","onCollapse","MenuUnfoldOutlined","MenuFoldOutlined","renderToggerIconDom","TabPane","Tabs","Content","BasicLayout","routes","closable","setIsCollapsed","setTabList","activeTabKey","setActiveTabKey","push","replace","key","forEach","includes","prevState","activeKey","tabBarStyle","background","tabPosition","tabBarGutter","hideAdd","type","onChange","onEdit","targetKey","action","targetIndex","findIndex","targetTab","newTabList","handleTabsRemove","tab","componentPath","name","redirect","keepAlive","isHideLayout","transformTreeToFlat","tree","result","cloneDeep","node","asyncImportComponent","importComp","Component","setComponent","a","importComponent","fetchComponent","ConnectedRouter","routerRedux","RouterConfig","indexOf","component","basicRoute","layoutRoute","locale","zhCN","route","exact"],"mappings":"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","file":"static/js/main.a8f11b5f.chunk.js","sourcesContent":["import '@/assets/css/index.less';\r\nimport dva from 'dva';\r\nimport createHistory from 'history/createHashHistory';\r\n\r\n//1. 初始化\r\nconst app = dva({\r\n    history: createHistory(),\r\n});\r\n\r\n//2. 路由\r\napp.router(require('@/router/router').default);\r\n\r\n//3. 启动\r\napp.start('#root');\r\n\r\nexport default app._store;\r\n","var map = {\n\t\"./modules/demo/demoList\": [\n\t\t234,\n\t\t0,\n\t\t2\n\t],\n\t\"./modules/demo/demoList.js\": [\n\t\t234,\n\t\t0,\n\t\t2\n\t],\n\t\"./modules/模块业务代码写这里.md\": [\n\t\t417,\n\t\t9\n\t],\n\t\"./views/exception/404\": [\n\t\t231,\n\t\t1,\n\t\t3\n\t],\n\t\"./views/exception/404.js\": [\n\t\t231,\n\t\t1,\n\t\t3\n\t],\n\t\"./views/home/home\": [\n\t\t232,\n\t\t4\n\t],\n\t\"./views/home/home.js\": [\n\t\t232,\n\t\t4\n\t],\n\t\"./views/user/login\": [\n\t\t233,\n\t\t5\n\t],\n\t\"./views/user/login.js\": [\n\t\t233,\n\t\t5\n\t],\n\t\"./views/系统全局页面写这里.md\": [\n\t\t418,\n\t\t10\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 409;\nmodule.exports = webpackAsyncContext;","export default __webpack_public_path__ + \"static/media/logo.51586d6b.svg\";","import { useEffect, useState } from 'react';\r\nimport { Menu, Layout } from 'antd';\r\nimport logo from '@/assets/image/logo.svg'\r\nimport styled from 'styled-components';\r\nimport { Link } from 'dva/router';\r\nimport { intersection } from 'lodash';\r\nimport { transUrlToList } from '@/utils/utils'\r\nimport {\r\n    PieChartOutlined\r\n} from '@ant-design/icons';\r\n\r\nconst Div = styled.div`\r\n    .logo {\r\n        display: flex;\r\n        justify-content: center;\r\n        height: 64px;\r\n        position: relative;\r\n        line-height: 64px;\r\n        transition: all 0.2s;\r\n        background: #002140;\r\n        overflow: hidden;\r\n        img {\r\n            display: inline-block;\r\n            vertical-align: middle;\r\n            height: 32px;\r\n        }\r\n        h1 {\r\n            color: white;\r\n            display: inline-block;\r\n            vertical-align: middle;\r\n            font-size: 20px;\r\n            margin: 0 0 0 12px;\r\n            font-family: 'Myriad Pro', 'Helvetica Neue', Arial, Helvetica, sans-serif;\r\n            font-weight: 600;\r\n        }\r\n    }\r\n    .sider {\r\n        min-height: 100vh;\r\n        box-shadow: 2px 0 6px rgba(0, 21, 41, 0.35);\r\n        position: relative;\r\n        z-index: 10;\r\n        &.sider-fixed{\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n        }\r\n        &.ligth {\r\n            background-color: white;\r\n            .logo {\r\n                background: white;\r\n                h1 {\r\n                    color: #002140;\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nconst { Sider } = Layout;\r\nconst { SubMenu, Item } = Menu;\r\nconst SideMenu = (props) => {\r\n    const { menuData, isCollapsed, location, initialState } = props\r\n    const [selectedMenuKeys, setSelectedMenuKeys] = useState(initialState.tabList[0].path)\r\n    const [openKeys, setOpenKeys] = useState([])\r\n\r\n    //根据hash路由切换菜单\r\n    useEffect(() => {\r\n        setSelectedMenuKeys(location.pathname)\r\n        setOpenKeys(transUrlToList(location.pathname))\r\n    }, [location.pathname])\r\n\r\n    //获取菜单子节点\r\n    const getNavMenuItems = (menuData) => {\r\n        if (!menuData) return [];\r\n        const validMenuData = menuData\r\n            .filter(item => item.title && !item.isHideInMenu)\r\n            .map(item => {\r\n                return generateSubMenuOrMenuItem(item)\r\n            })\r\n        return validMenuData;\r\n    }\r\n\r\n    //生成subMenu 或者 menu\r\n    const generateSubMenuOrMenuItem = (item) => {\r\n        if (item.children && item.children.some(child => child.title)) {\r\n            const childrenItems = getNavMenuItems(item.children)\r\n            if (childrenItems && childrenItems.length) {\r\n                return (\r\n                    <SubMenu key={item.path} icon={<PieChartOutlined />} title={item.title}>\r\n                        {childrenItems}\r\n                    </SubMenu>\r\n                )\r\n            }\r\n            return null\r\n        } else {\r\n            return (\r\n                <Item key={item.path}>\r\n                    <Link to={item.path}>{item.title}</Link>\r\n                </Item>\r\n            )\r\n        }\r\n    }\r\n\r\n    //点击菜单展开，其他菜单项关闭\r\n    const handleMenuOpen = (openKeys) => {\r\n        const lastOpenKey = openKeys[openKeys.length - 1];\r\n        const IsMoreThanOneOpenKeysInMainMenu = intersection(openKeys, menuData.map(item => item.path)).length > 1\r\n        setOpenKeys(() => IsMoreThanOneOpenKeysInMainMenu ? [lastOpenKey] : [...openKeys])\r\n    }\r\n\r\n    /**\r\n     * renderParts\r\n     */\r\n    const renderLogoDom = () => {\r\n        return (\r\n            <div className=\"logo\">\r\n                <Link to=\"/\">\r\n                    <img src={logo} alt=\"logo\" />\r\n                    {!isCollapsed && <h1>智博天下</h1>}\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderMenuDom = () => {\r\n        return (\r\n            <Menu\r\n                selectedKeys={selectedMenuKeys}\r\n                openKeys={openKeys}\r\n                mode=\"inline\"\r\n                theme=\"dark\"\r\n                onClick={(e) => {\r\n                    props.handleMenuChange(e)\r\n                }}\r\n                onOpenChange={handleMenuOpen}\r\n            >\r\n                {getNavMenuItems(menuData)}\r\n            </Menu>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Div>\r\n            <Sider collapsed={isCollapsed} width={256} className=\"sider sider-fixed\">\r\n                {renderLogoDom()}\r\n                {renderMenuDom()}\r\n            </Sider>\r\n        </Div>\r\n\r\n    )\r\n}\r\nexport default SideMenu;","//将hash路由 转换为分级数组 '/demo/demoList' -> ['/demo', '/demo/demoList']\r\nexport const transUrlToList = (url) => {\r\n    const urlList = url.split(\"/\").filter(item => item)\r\n    return urlList.map((item, index) => `/${urlList.slice(0, index + 1).join('/')}`)\r\n}","import styled from 'styled-components';\r\nimport {\r\n    MenuFoldOutlined,\r\n    MenuUnfoldOutlined\r\n} from '@ant-design/icons';\r\nconst Div = styled.div`\r\n    .header{\r\n        position: fixed;\r\n        top: 0;\r\n        height: 60px;\r\n        padding: 0 12px 0 0;\r\n        background: #fff;\r\n        box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);\r\n        width: 100%;\r\n        z-index: 100;\r\n        .trigger {\r\n            font-size: 20px;\r\n            line-height: 60px;\r\n            width: 60px;\r\n            cursor: pointer;\r\n            transition: all 0.3s, padding 0s;\r\n            padding: 0 24px;\r\n            &:hover {\r\n                background: #e6f7ff;\r\n            }\r\n        }\r\n    }\r\n`;\r\nconst GlobalHeader = (props) => {\r\n    /**\r\n     * renderParts\r\n     */\r\n    const renderToggerIconDom = () => {\r\n        const { isCollapsed } = props;\r\n        return (\r\n            <div className=\"trigger\" onClick={props.onCollapse}>\r\n                {isCollapsed ?\r\n                    <MenuUnfoldOutlined /> :\r\n                    <MenuFoldOutlined />\r\n                }\r\n            </div>\r\n        )\r\n\r\n    }\r\n\r\n    return (\r\n        <Div>\r\n            <div className=\"header\">\r\n                {renderToggerIconDom()}\r\n            </div>\r\n        </Div>\r\n\r\n    )\r\n}\r\nexport default GlobalHeader;","\r\nimport { useState, useEffect } from 'react';\r\nimport { Layout, Tabs } from 'antd';\r\nimport styled from 'styled-components';\r\nimport SideMenu from './SideMenu';\r\nimport GlobalHeader from './GlobalHeader';\r\nconst Div = styled.div`\r\n    .fixed-sider{\r\n        padding-left: 256px;\r\n        transition: .2s all;\r\n    }\r\n    .fixed-sider-collapsed{\r\n        padding-left: 80px;\r\n        transition: .2s all;\r\n    }\r\n    /* tabs的样式都写在这里面 */\r\n    .globalTabs {\r\n        border-top: 1px solid #f0f0f0;\r\n        &.tabs-fixedHeader{\r\n            padding-top: 94px;\r\n        }\r\n        .ant-tabs {\r\n            line-height: 1.2;\r\n            .ant-tabs-nav {\r\n                margin-bottom: 0;\r\n                .ant-tabs-nav-wrap {\r\n                    line-height: 1.2;\r\n                    .ant-tabs-nav-list {\r\n                        .ant-tabs-tab {\r\n                            font-size: 12px;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .ant-tabs-nav {\r\n            position: fixed;\r\n            top: 60px;\r\n            left: 256px;\r\n            right: 0;\r\n        }\r\n    }\r\n    .router-wrap{\r\n        padding: 10px;\r\n    }\r\n`;\r\n\r\nconst { TabPane } = Tabs;\r\nconst { Content } = Layout;\r\n\r\nconst BasicLayout = (props) => {\r\n    const { routes, history } = props;\r\n    const initialState = {\r\n        tabList: [{\r\n            closable: false,\r\n            title: \"首页\",\r\n            path: \"/home\",\r\n        }]\r\n    }\r\n    const [isCollapsed, setIsCollapsed] = useState(false);\r\n    const [tabList, setTabList] = useState(initialState.tabList)\r\n    const [activeTabKey, setActiveTabKey] = useState(initialState.tabList[0].path)\r\n\r\n    useEffect(() => {\r\n        // 每次404页面跳回上一级，会触发！\r\n        history.push(initialState.tabList[0].path)\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const pathname = history.location.pathname;\r\n        if (!routes.some(item => item.path === pathname)) history.replace('/404')\r\n    }, [history.location.pathname])\r\n\r\n    //点击左侧菜单\r\n    const handleMenuChange = (e) => {\r\n        setActiveTabKey(e.key)\r\n        routes.forEach(item => {\r\n            if (item.path === e.key) {\r\n                if (!tabList.map(item => item.path).includes(item.path)) {\r\n                    tabList.push(item)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    //点击tab标签关闭\r\n    const handleTabsRemove = (targetKey) => {\r\n        const targetIndex = tabList.findIndex(item => item.path === targetKey)\r\n        const targetTab = tabList[targetIndex - 1];\r\n        const newTabList = tabList.filter(item => item.path !== targetKey)\r\n        setTabList(newTabList)\r\n        if (activeTabKey === targetKey) {\r\n            setActiveTabKey(targetTab.path)\r\n            history.push(targetTab.path)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * renderParts\r\n     * @returns \r\n     */\r\n    const renderContentDom = () => {\r\n        return (\r\n            <Content className=\"globalTabs tabs-fixedHeader\">\r\n                <Tabs\r\n                    activeKey={activeTabKey}\r\n                    tabBarStyle={{ background: '#fff' }}\r\n                    tabPosition=\"top\"\r\n                    tabBarGutter={-1}\r\n                    hideAdd\r\n                    type=\"editable-card\"\r\n                    onChange={(e) => {\r\n                        history.push(e)\r\n                        setActiveTabKey(e)\r\n                    }}\r\n                    onEdit={(targetKey, action) => handleTabsRemove(targetKey)}\r\n                >\r\n                    {tabList.map((item) => (\r\n                        <TabPane tab={item.title} key={item.path} closable={item.closable}>\r\n                            <div className=\"router-wrap\">\r\n                                {props.children}\r\n                            </div>\r\n                        </TabPane>\r\n                    ))}\r\n                </Tabs>\r\n            </Content>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Div>\r\n            <Layout>\r\n                <SideMenu\r\n                    isCollapsed={isCollapsed}\r\n                    initialState={initialState}\r\n                    handleMenuChange={handleMenuChange}\r\n                    {...props}\r\n                />\r\n                <Layout className={!isCollapsed ? \"fixed-sider\" : \"fixed-sider-collapsed\"}>\r\n                    <GlobalHeader\r\n                        isCollapsed={isCollapsed}\r\n                        onCollapse={() => {\r\n                            setIsCollapsed(prevState => !prevState)\r\n                        }}\r\n                    />\r\n                    {renderContentDom()}\r\n                    {/* {props.children} */}\r\n                </Layout>\r\n            </Layout>\r\n        </Div>\r\n    )\r\n}\r\n\r\nexport default BasicLayout","/**\r\n * 这块是模拟后端菜单分级，后续将会在后端返回\r\n */\r\n//系统固有菜单，或者一些无权限菜单\r\nconst staticMenuData = [\r\n    {\r\n        componentPath: 'views/home/home',\r\n        id: '1',\r\n        path: '/home',\r\n        name: 'home',\r\n        redirect: null,\r\n        icon: '',\r\n        keepAlive: false,\r\n        title: '首页'\r\n    },\r\n    {\r\n        componentPath: 'views/exception/404',\r\n        id: '3',\r\n        path: '/404',\r\n        name: '404',\r\n        redirect: null,\r\n        icon: '',\r\n        keepAlive: false,\r\n        title: '404',\r\n        isHideInMenu: true,\r\n        isHideLayout: true,\r\n    },\r\n    {\r\n        componentPath: 'views/user/login',\r\n        id: '4',\r\n        path: '/login',\r\n        name: 'login',\r\n        redirect: null,\r\n        icon: '',\r\n        keepAlive: false,\r\n        title: '登录',\r\n        isHideLayout: true,\r\n    },\r\n]\r\n\r\n//权限菜单 理论上是后台配置的 \r\n//注意：菜单path的命名方法请严格按照层级依次命名如： '/demo' > '/demo/demoList' > '/demo/demoList/xxxx' (通用的约定，主要为了实现主页面tab切换页面，左侧menu被选中的子项父级展开效果，也是为了阅读层级清晰明了)\r\nconst dynamicMenuData = [\r\n    {\r\n        componentPath: 'layouts/RouteView',\r\n        id: '2',\r\n        path: '/demo',\r\n        name: 'demo',\r\n        redirect: null,\r\n        icon: '',\r\n        keepAlive: false,\r\n        title: '示例管理',\r\n        children: [\r\n            {\r\n                componentPath: 'modules/demo/demoList',\r\n                id: '1-1',\r\n                path: '/demo/demoList',\r\n                name: 'demo-demoList',\r\n                redirect: null,\r\n                icon: '',\r\n                keepAlive: false,\r\n                title: '示例列表',\r\n            },\r\n            {\r\n                componentPath: 'layouts/RouteView',\r\n                id: '1-2',\r\n                path: '/demo/demoList/componentManage',\r\n                name: 'componentManage',\r\n                redirect: null,\r\n                icon: '',\r\n                keepAlive: false,\r\n                title: '组件管理',\r\n                children: [\r\n                    {\r\n                        componentPath: 'modules/demo/demoList',\r\n                        id: '1-1',\r\n                        path: '/demo/demoList/componentManage/detail',\r\n                        name: 'componentManage-detail',\r\n                        redirect: null,\r\n                        icon: '',\r\n                        keepAlive: false,\r\n                        title: '示例详情',\r\n                    }\r\n                ]\r\n            },\r\n        ]\r\n    },\r\n    {\r\n        componentPath: 'layouts/RouteView',\r\n        id: '6',\r\n        path: '/demo1',\r\n        name: 'demo1',\r\n        redirect: null,\r\n        icon: '',\r\n        keepAlive: false,\r\n        title: '示例管理1',\r\n        children: [\r\n            {\r\n                componentPath: 'modules/demo1/demoList',\r\n                id: '1-1',\r\n                path: '/demo1/demoList1',\r\n                name: 'demo-demoList1',\r\n                redirect: null,\r\n                icon: '',\r\n                keepAlive: false,\r\n                title: '示例列表1',\r\n            }\r\n        ]\r\n    },\r\n]\r\n\r\nconst menuData = [...staticMenuData, ...dynamicMenuData]\r\n\r\nexport {\r\n    staticMenuData,\r\n    dynamicMenuData,\r\n    menuData,\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { cloneDeep } from 'lodash'\r\n/**\r\n * 处理树状结构菜单\r\n */\r\nexport const transformTreeToFlat = (tree, result = []) => {\r\n    cloneDeep(tree).forEach(node => {\r\n        result.push(node)\r\n        node.children && transformTreeToFlat(node.children, result)\r\n    })\r\n    return result.map(item => {\r\n        item.children && delete item.children\r\n        return { ...item }\r\n    });\r\n}\r\n\r\n/**\r\n * 动态加载组件方法\r\n */\r\nexport const asyncImportComponent = (importComp) => {\r\n    function AsyncComponent(props) {\r\n        const [Component, setComponent] = useState(null)\r\n        useEffect(() => {\r\n            async function fetchComponent() {\r\n                try {\r\n                    const { default: importComponent } = await importComp()\r\n                    setComponent(() => importComponent)\r\n                } catch (e) {\r\n                    props.history.replace('/404')\r\n                }\r\n            }\r\n            fetchComponent()\r\n            // eslint-disable-next-line\r\n        }, [])\r\n        return (\r\n            Component ? <Component {...props} /> : <div>加载中...</div>\r\n        )\r\n    }\r\n    return AsyncComponent\r\n}","\r\nimport { routerRedux, Switch, Route } from 'dva/router';\r\nimport zhCN from 'antd/lib/locale/zh_CN';\r\nimport { ConfigProvider } from 'antd';\r\nimport BasicLayout from \"@/layouts/BasicLayout\";\r\nimport { menuData } from \"./menu\"\r\nimport { transformTreeToFlat, asyncImportComponent } from './routerUtils'\r\n\r\nconst { ConnectedRouter } = routerRedux;\r\n\r\n\r\nconst RouterConfig = ({ history, app }) => {\r\n    /**\r\n     * 一级菜单 component命名控制字段为 layouts，就不计入路由组件中\r\n     */\r\n    const routes = transformTreeToFlat(menuData).filter(item => !(item.componentPath.indexOf('layouts') > -1)).map(item => {\r\n        return {\r\n            ...item,\r\n            component: () => import(`@/pages/${item.componentPath}`)\r\n        }\r\n    })\r\n    const basicRoute = routes.filter(item => item.isHideInMenu)\r\n    const layoutRoute = routes.filter(item => !item.isHideInMenu)\r\n    return (\r\n        <ConfigProvider locale={zhCN}>\r\n            <ConnectedRouter history={history}>\r\n                <Switch>\r\n                    {basicRoute.map(route => <Route path={route.path} key={route.name} exact component={asyncImportComponent(route.component)} ></Route>)}\r\n                    <BasicLayout menuData={menuData} routes={routes} history={history}>\r\n                        {layoutRoute.map(route => <Route path={route.path} key={route.name} exact component={asyncImportComponent(route.component)} ></Route>)}\r\n                    </BasicLayout>\r\n                </Switch>\r\n            </ConnectedRouter>\r\n        </ConfigProvider>\r\n    );\r\n}\r\n\r\nexport default RouterConfig;"],"sourceRoot":""}