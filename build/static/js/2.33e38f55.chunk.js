(this["webpackJsonpzbtx-base-pc-react"]=this["webpackJsonpzbtx-base-pc-react"]||[]).push([[2],{234:function(e,t,n){"use strict";n.r(t);var a=n(8),o=n(7),i=n(462),r=n(21),c=n.n(r),l=n(1),s=n(41),u=n(3),d=n(63),b=n(0),p=n.n(b),f=n(228),h=n(507),m=n(168),j=n(500),v=n(503),g=n(489),O=n(490),x=n(426),y=n(64),w=n(11),C=n(15),k=n(504),S=n(9),P=function(e,t){var n=e.value,a=e.onChange,o=e.formItemProps,i=(o=void 0===o?{}:o).placeholder,r=void 0===i?"\u8bf7\u8f93\u5165":i;return Object(S.jsx)(k.a,{style:{width:"100%"},placeholder:r,value:n,onChange:function(e){a(e.target.value)}})},I=p.a.forwardRef(P),R=n(457),z=function(e,t){var n=R.a.Option,a=e.value,o=e.onChange,i=void 0===o?function(){}:o,r=e.formItemProps,c=(r=void 0===r?{}:r).placeholder,l=void 0===c?"\u8bf7\u9009\u62e9":c,s=r.options;return s="function"===typeof s?s():s,Object(S.jsx)(R.a,{style:{width:"100%"},allowClear:!0,placeholder:l,value:a,onChange:function(e){i(e)},children:s&&s.map((function(e){return Object(S.jsx)(n,{value:e.value,children:e.label},e.value)}))})},D=p.a.forwardRef(z),F=n(501),N=n(441),T=n.n(N),_=F.a.RangePicker,L=function(e,t){var n,a=e.value,o=e.onChange,i=e.formItemProps,r=(i=void 0===i?{}:i).placeholder,c=void 0===r?"\u8bf7\u8f93\u5165":r;return Object(S.jsx)(_,{showTime:!0,allowClear:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"},placeholder:c,value:(n=a,Array.isArray(n)&&2===n.length?(console.log(n),n.map((function(e){return e&&T()(e)}))):n),onChange:function(e,t){o(t)}})},A=p.a.forwardRef(L),E=function(e,t){var n=R.a.Option,a=e.value,o=e.onChange,i=e.formItemProps,r=(i=void 0===i?{}:i).placeholder,c=void 0===r?"\u8bf7\u8f93\u5165\u63d0\u793a\u5185\u5bb9":r,l=i.options;return l="function"===typeof l?l():l,Object(S.jsx)(R.a,{mode:"multiple",allowClear:!0,defaultValue:["a","b"],value:a?a.split(","):[],style:{width:"300px"},placeholder:c,onChange:function(e){o(e.join(","))},children:l.map((function(e){return Object(S.jsx)(n,{value:e.value,children:e.label},e.value)}))})},K=Object(b.forwardRef)(E),M=n(18),q=n(17),B=n(505),H=n(464),V=n.n(H),W=n(483),Y=n.n(W),J=V.a.create({baseURL:"",timeout:3e4});function U(e,t){return J({url:e,method:"get",params:t})}J.interceptors.request.use((function(e){var t=Y.a.get("csrftoken");return t&&(e.headers["X-CSRFToken"]=t),e}),(function(e){if(1012===e.code);else f.b.error(e.msg);return Promise.reject(e)})),J.interceptors.response.use((function(e){var t=e.data;if(200!==e.status)return f.b.error(t.msg),Promise.reject(t);switch(t.code){case 0:case 200:return Promise.resolve(t);default:return f.b.error(t.msg),Promise.reject(t);case 1012:B.a.info({content:t.msg,onOk:function(){window.location.hash="/login"}})}}),(function(e){return f.b.error(e.response.data),Promise.reject(e.response.data)}));var G=n(437),Q=n.n(G),X=R.a.Option,Z=function(e){Object(M.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(w.a)(this,n),(a=t.call(this,e)).componentWillUnmount=function(){a.setState=function(e,t){}},a.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a.props,n=t.url,o=void 0===n?"":n,i=t.resetFields,r=void 0===i?{value:"id",label:"name"}:i,c=t.searchParams,s=void 0===c?"name":c,u=t.initialParams,d=void 0===u?{}:u,b=Object(l.a)({page:1,page_size:30},d);e&&(b[s]=e),U(o,b).then((function(e){var t=e.data.map((function(e){return{value:e[r.value],label:e[r.label]}}));a.setState({data:t})})).finally((function(){a.setState({loading:!1})}))},a.handleSearch=function(e){a.setState({loading:!0}),a.fetchData(e)},a.state={data:[],value:void 0,loading:!0},a.fetchData=Q()(a.fetchData,30,{leading:!0,trailing:!1,maxWait:300}),a}return Object(C.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange,a=e.placeholder,o=e.disabled,i=void 0!==o&&o,r=this.state,c=r.loading,l=r.data;return Object(S.jsx)(R.a,{showSearch:!0,value:t,placeholder:a,style:{width:"100%"},filterOption:!1,onSearch:this.handleSearch,onChange:function(e){n(e)},loading:c,disabled:i,notFoundContent:"\u6682\u65e0\u6570\u636e",children:l.map((function(e,t){return Object(S.jsx)(X,{value:e.value,children:e.label},t)}))})}}]),n}(b.Component),$=Z,ee=function(e){Object(M.a)(n,e);var t=Object(q.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange,a=e.formItemProps,o=(a=void 0===a?{}:a).placeholder,i=void 0===o?"\u8bf7\u8f93\u5165":o,r=a.resetFields,c=void 0===r?{value:"name",label:"name"}:r,l=a.searchParams,s=void 0===l?"name":l,u=a.url,d=void 0===u?"":u;return Object(S.jsx)($,{value:t,onChange:n,url:d,searchParams:s,resetFields:c,placeholder:i})}}]),n}(b.Component),te=ee,ne=new Map;ne.set("input",I),ne.set("select",D),ne.set("rangePickerSelect",A),ne.set("multiSelect",K),ne.set("searchSelect",te);var ae,oe,ie,re=function(){function e(){Object(w.a)(this,e)}return Object(C.a)(e,null,[{key:"getControlComponent",value:function(e,t){return ne.has(e)?p.a.createElement(ne.get(e),Object(l.a)({},t)):Object(S.jsx)(S.Fragment,{children:"\u5f00\u53d1\u4e2d"})}}]),e}(),ce=y.a.div(ae||(ae=Object(d.a)(["\n    height: 100%;\n    background: #ffffff;\n    .collapse {\n        color: #4569d4;\n        text-decoration: none;\n        transition: opacity .2s;\n        outline: none;\n        cursor: pointer;\n        display: inline-block;\n        margin-left: 16px;\n    }\n    .table-form-anticon{\n        margin-left: 0.5em;\n        transition: all 0.3s ease 0s;\n        transform: rotate(0);\n        display: inline-block;\n        color: inherit;\n        font-style: normal;\n        line-height: 0;\n        text-align: center;\n        text-transform: none;\n        vertical-align: -.125em;\n        text-rendering: optimizeLegibility;\n        -webkit-font-smoothing: antialiased;\n    }\n"]))),le={labelCol:{xs:{span:8},sm:{span:6}},wrapperCol:{xs:{span:16},sm:{span:18}}},se=function(e){var t=e.filterForm,n=Object(b.useState)(!0),a=Object(u.a)(n,2),o=a[0],i=a[1],r=v.a.useForm(),c=Object(u.a)(r,1)[0],s=function(){var t=c.getFieldsValue();e.onSubmit&&e.onSubmit(t)};return Object(b.useEffect)((function(){s()}),[]),Object(S.jsx)(ce,{children:Object(S.jsx)(v.a,Object(l.a)(Object(l.a)({onFinish:function(){s()}},le),{},{form:c,children:Object(S.jsxs)(g.a,{gutter:[24,24],type:"flex",align:"middle",children:[t.map((function(e,t){var n;return(t+1>3&&!o||t+1<=3)&&Object(S.jsx)(O.a,{xxl:6,xl:8,md:12,xs:24,children:Object(S.jsx)(v.a.Item,{style:{width:"100%"},label:(null===(n=e.formItemProps)||void 0===n?void 0:n.labelTitle)||e.title,initialValue:e.initialValue,name:e.key,children:re.getControlComponent(e.type,Object(l.a)({},e))})},t)})),t.length>0&&Object(S.jsx)(O.a,{xxl:6,xl:8,md:12,xs:24,children:Object(S.jsxs)("div",{style:{marginLeft:"27px",marginBottom:"24px",padding:"0 20px 0 0"},children:[Object(S.jsx)(x.a,{htmlType:"submit",type:"primary",style:{marginLeft:8},children:"\u67e5\u8be2"}),Object(S.jsx)(x.a,{htmlType:"reset",type:"reset",style:{marginLeft:8},children:"\u91cd\u7f6e"}),t.length>3&&Object(S.jsxs)("div",{className:"collapse",onClick:function(){i((function(e){return!e}))},children:[o?"\u5c55\u5f00":"\u6536\u8d77",Object(S.jsx)("span",{className:"table-form-anticon",children:Object(S.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:Object(S.jsx)("path",{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"})})})]})]})})]})}))})},ue=n(112),de=n(508),be=n(458),pe=n(502),fe=n(509),he=y.a.div(oe||(oe=Object(d.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 32px;\n"]))),me=function(e){e.columns.forEach((function(e){e.key=e.dataIndex||"operate",e.disabled=!e.dataIndex}));var t=e.columns.map((function(e){return e.dataIndex})).filter((function(e){return!!e}))||[],n=Object(b.useState)(t),a=Object(u.a)(n,2),o=a[0],i=a[1],r=Object(b.useState)(!1),c=Object(u.a)(r,2),l=c[0],s=c[1],d=Object(b.useState)(!1),p=Object(u.a)(d,2),f=p[0],h=p[1];return Object(b.useEffect)((function(){h(o.length<t.length),s(o.length===t.length)}),[o]),Object(S.jsx)(de.a,{arrowPointAtCenter:!0,title:Object(S.jsxs)(he,{children:[Object(S.jsx)(be.a,{indeterminate:f,checked:l,onChange:function(n){var a=[];l?(a=[],h(!1)):(a=t,s(!0)),i(a),e.columnsChange(a)},children:"\u5217\u5c55\u793a"}),Object(S.jsx)("span",{style:{color:"#1890ff"},onClick:function(){i(t),e.columnsChange(t)},children:"\u91cd\u7f6e"})]}),trigger:"click",placement:"bottomRight",content:Object(S.jsx)("div",{style:{maxHeight:"300px",overflow:"auto"},children:Object(S.jsx)(pe.a,{itemHeight:24,draggable:!1,checkable:!0,onDrop:function(e){},blockNode:!0,onCheck:function(t){i(t),e.columnsChange(t)},checkedKeys:o,showLine:!1,switcherIcon:!1,height:280,treeData:e.columns})}),children:Object(S.jsx)(fe.a,{})})},je=(n(491),n(499)),ve=n(510),ge=["title","description","request","toolBarRender","beforeSearchSubmit","rowSelection","pagination","rowKey","columns","columnsSettingDisabled","density"],Oe=void 0,xe=y.a.div(ie||(ie=Object(d.a)(["\n\t.mb20 {\n\t\tmargin-bottom: 20px;\n\t}\n\t.table-title {\n\t\tcolor: #555555;\n\t\tfont-weight: 500;\n\t\tfont-size: 15px;\n\t\t.table-title-description {\n\t\t\tdisplay: inline-block;\n\t\t\tmargin-left: 15px;\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\t.copyStyle {\n\t\tdisplay: inline-block;\n\t\tcursor: pointer;\n\t\t&:hover {\n\t\t\t.ant-typography-copy {\n\t\t\t\tvisibility: visible !important;\n\t\t\t}\n\t\t}\n\t\t.ant-typography-copy {\n\t\t\tvisibility: hidden !important;\n\t\t}\n\t}\n\t.table-operation {\n\t\tcursor: pointer;\n\t\tmargin-left: 20px;\n\t\tdisplay: inline-block;\n\t}\n\t/* \u591a\u884c\u6587\u672c\u7701\u7565 */\n\t.tabel-more-ellipsis {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tdisplay: -webkit-box;\n\t\t-webkit-line-clamp: 1;\n\t\t-webkit-box-orient: vertical;\n\t\tword-break: break-word;\n\t\twhite-space: normal;\n\t}\n\t.ant-table-thead > tr > th {\n\t\twhite-space: nowrap;\n\t}\n\t.ant-table-row td {\n\t\twhite-space: nowrap;\n\t}\n\t.ant-table-scroll {\n\t\toverflow-x: auto;\n\t}\n\n\ttbody {\n\t\t/* overflow: hidden !important;\n        height: 200px !important;\n        background-color: red !important; */\n\t}\n"]))),ye=null,we=function(e){var t=Object(b.useState)([]),n=Object(u.a)(t,2),r=n[0],d=n[1],p=Object(b.useState)(e.columns||[]),v=Object(u.a)(p,2),g=v[0],O=v[1],x=Object(b.useState)(0),y=Object(u.a)(x,2),w=y[0],C=y[1],k=Object(b.useState)(!1),P=Object(u.a)(k,2),I=P[0],R=P[1],z=Object(b.useState)({page:1,page_size:10}),D=Object(u.a)(z,2),F=D[0],N=D[1],T=Object(b.useState)([]),_=Object(u.a)(T,2),L=_[0],A=_[1],E=Object(b.useState)([]),K=Object(u.a)(E,2),M=K[0],q=K[1],B=Object(b.useState)({FIRST_TIME_LOADING_TAG:!0}),H=Object(u.a)(B,2),V=H[0],W=H[1],Y=Object(b.useState)(!1),J=Object(u.a)(Y,2),U=J[0],G=J[1];Object(b.useEffect)((function(){var t=e.onRef;t&&t(Oe)}),[]),Object(b.useEffect)((function(){!0===U&&X()}),[F,V,U]);var Q=function(e,t){N({page:e,page_size:t})},X=Object(ue.debounce)(Object(s.a)(c.a.mark((function t(){var n,a,o,i=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:{},a=e.request){t.next=4;break}return t.abrupt("return");case 4:return R(!0),t.prev=5,t.next=8,a(Object(l.a)(Object(l.a)(Object(l.a)({},V),F),n));case 8:(o=t.sent).total<(F.page-1)*F.page_size+1&&0!==o.total&&Q((function(e){return{pagination:{page:e.pagination.page-1,page_size:e.pagination.page_size}}}),(function(){X()})),d(o.data),C(o.total),R(!1),G(!1),t.next=23;break;case 16:t.prev=16,t.t0=t.catch(5),console.warn(t.t0),f.b.warn(t.t0.msg),d([]),R(!1),G(!1);case 23:case"end":return t.stop()}}),t,null,[[5,16]])}))),30,{leading:!0,trailing:!1,maxWait:300}),Z=function(){A([]),q([])},$=e.title,ee=void 0===$?"\u9ad8\u7ea7\u8868\u683c":$,te=e.description,ne=void 0===te?"":te,ae=(e.request,e.toolBarRender),oe=e.beforeSearchSubmit,ie=void 0===oe?function(e){return e}:oe,re=e.rowSelection,ce=e.pagination,le=e.rowKey,de=e.columns,be=e.columnsSettingDisabled,pe=void 0!==be&&be,fe=e.density,he=Object(a.a)(e,ge),we=de.filter((function(e){return e.type&&!e.hideInSearch}));return Object(S.jsxs)(xe,{children:[Object(S.jsx)("div",{className:"filter-wrap mb20",hidden:0===we.length,children:Object(S.jsx)(h.a,{bordered:!1,children:Object(S.jsx)(se,{wrappedComponentRef:function(e){return ye=e},onSubmit:function(e){Q(1,F.page_size),Z(),function(e){W(e)}(ie(e))},filterForm:we})})}),Object(S.jsxs)(h.a,{bordered:!1,children:[ae&&Object(S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(S.jsxs)("div",{className:"table-title",children:[Object(S.jsx)("span",{style:{fontWeight:"bold"},children:ee}),ne&&Object(S.jsx)("span",{className:"table-title-description",children:Object(S.jsx)(m.a,{placement:"right",title:ne,children:Object(S.jsx)(je.a,{})})})]}),Object(S.jsxs)("div",{style:{textAlign:"right"},className:"mb20",children:[ae(Oe,{selectedRowKeys:L,selectedRows:M,dataSource:r}),Object(S.jsx)(m.a,{title:"\u5237\u65b0",children:Object(S.jsx)("div",{className:"table-operation",onClick:function(){ye&&ye.reset&&(G(!0),ye.reset(),Z())},children:Object(S.jsx)(ve.a,{})})}),!pe&&Object(S.jsx)(m.a,{title:"\u5217\u8bbe\u7f6e",children:Object(S.jsx)("div",{className:"table-operation",children:Object(S.jsx)(me,{columns:de,columnsChange:function(t){var n,a=e.columns,r=[],c=Object(i.a)(a);try{for(c.s();!(n=c.n()).done;){var l,s=n.value,u=Object(i.a)(t);try{for(u.s();!(l=u.n()).done;){var d=l.value;s.dataIndex===d&&r.push(s)}}catch(p){u.e(p)}finally{u.f()}}}catch(p){c.e(p)}finally{c.f()}var b=a.filter((function(e){return!e.dataIndex}));O([].concat(r,Object(o.a)(b)))}})})})]})]}),Object(S.jsx)(j.a,Object(l.a)(Object(l.a)({},he),{},{size:fe||"default",loading:I,rowKey:le,dataSource:r,columns:g.filter((function(e){return!e.hideInTable})).map((function(e){if(e.render||("select"===e.type&&!e.render&&e.formItemProps&&Array.isArray(e.formItemProps.options)?e.render=function(t){try{var n=e.formItemProps.options.find((function(e){return e.value===t}));return(n?n.label:t)||"-"}catch(a){return t||"-"}}:e.render=function(t){return Object(S.jsx)("div",{onClick:function(){if(e.isCopy){var n=document.createElement("input");document.body.appendChild(n),n.value=t,n.select(),document.execCommand("copy",!1),n.remove(),f.b.success("\u590d\u5236\u6210\u529f")}},children:t||"-"})}),e.ellipsis){e.ellipsis=!1;var t=e.render;e.render=function(e,n,a){return Object(S.jsx)("div",{className:"tabel-more-ellipsis",children:Object(S.jsx)(m.a,{placement:"topLeft",title:t(e,n,a),children:t(e,n,a)})})}}return e})),pagination:Object(l.a)(Object(l.a)({},ce),{},{total:w,showSizeChanger:!0,showQuickJumper:!0,current:F.page,pageSize:F.page_size,showTotal:function(e,t){return"\u5171".concat(e,"\u6761")},onChange:function(e,t){Q(e,t)},onShowSizeChange:function(e,t){Q(e,t)}}),rowSelection:re?Object(l.a)(Object(l.a)({selectedRowKeys:L},re),{},{onChange:function(e,t){re&&re.onChange&&re.onChange(e,t),A(e),q(t)},getCheckboxProps:function(e){if(re&&re.getCheckboxProps)return re.getCheckboxProps(e,{selectedRowKeys:L,selectedRows:M,dataSource:r})}}):void 0}))]})]})};t.default=function(e){return Object(S.jsx)(we,{title:"\u620f\u5982\u4eba\u68ee",description:"\u4e0d\u8981\u770b\u6211\uff0c\u53ea\u662f\u4e2ademo",request:function(){return new Promise((function(e,t){setTimeout((function(){e({total:10,data:[{demo:"demo\u6570\u636e1",demo1:"demo1",key:"demo"},{demo:"demo\u6570\u636e2",key:"demo1"}]})}),1e3)}))},columns:[{dataIndex:"demo",title:"demo",type:"input"},{dataIndex:"demo1",title:"demo1",type:"select",formItemProps:{options:[{value:"1111",label:"demo1"},{value:"2222",label:"demo2"}]}}],toolBarRender:function(e,t){t.selectedRowKeys,t.selectedRows;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(x.a,{type:"primary",onClick:function(){},children:"\u65b0\u589e"})})}})}}}]);
//# sourceMappingURL=2.33e38f55.chunk.js.map